{"version":3,"sources":["components/Searchbar/Searchbar.module.scss","components/ImageGallery/ImageGallery.module.scss","components/ImageGalleryItem/ImageGalleryItem.module.scss","components/Button/Button.module.scss","components/Modal/Modal.module.scss","components/Loader/Loader.module.scss","components/Searchbar/Searchbar.jsx","components/Loader/Loader.jsx","components/ImageGallery/ImageGallery.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/Button/Button.jsx","components/Fuse/Fuse.jsx","components/Modal/Modal.jsx","Api/Api.jsx","App.jsx","index.js"],"names":["module","exports","Searchbar","onQueryUpdate","useState","query","setQuery","className","s","searchbar","searchForm","onSubmit","e","preventDefault","trim","toast","info","theme","position","autoClose","transition","Flip","toastId","type","button","style","fontSize","color","onChange","target","value","toLowerCase","input","autoComplete","autoFocus","placeholder","Spinner","spinner","height","width","timeout","ImageGallery","status","children","useEffect","error","gallery","message","ImageGalleryItem","images","onClickOpenModal","handlerBigImageUrl","onOpenModal","map","i","id","webformatURL","largeImageURL","tags","item","onClick","src","alt","image","Button","handlerPageIncrement","container","Fuse","state","errorInfo","this","setState","whiteSpace","toString","componentStack","props","Component","Modal","onClickCloseModal","modalState","hdImgURL","handlerKeyDownClose","key","window","addEventListener","removeEventListener","overlay","currentTarget","modal","fetchImagesQuery","page","a","fetch","res","json","hits","App","setImages","setPage","setStatus","setModalState","setHdImgURL","fetchedImages","length","setTimeout","scrollTo","top","behavior","document","documentElement","scrollHeight","newQuery","dataset","ReactDOM","render","StrictMode","getElementById"],"mappings":"sGACAA,EAAOC,QAAU,CAAC,UAAY,6BAA6B,WAAa,8BAA8B,OAAS,0BAA0B,MAAQ,2B,mBCAjJD,EAAOC,QAAU,CAAC,QAAU,8BAA8B,QAAU,8BAA8B,MAAQ,8B,mBCA1GD,EAAOC,QAAU,CAAC,KAAO,+BAA+B,MAAQ,kC,mBCAhED,EAAOC,QAAU,CAAC,UAAY,0BAA0B,OAAS,uBAAuB,KAAO,uB,mBCA/FD,EAAOC,QAAU,CAAC,QAAU,uBAAuB,MAAQ,uB,mBCA3DD,EAAOC,QAAU,CAAC,QAAU,0B,oOCIb,SAASC,EAAT,GAAqC,IAAjBC,EAAgB,EAAhBA,cACjC,EAA0BC,mBAAS,IAAnC,mBAAOC,EAAP,KAAcC,EAAd,KAmBA,OACE,wBAAQC,UAAWC,IAAEC,UAArB,SACE,uBAAMF,UAAWC,IAAEE,WAAYC,SApBb,SAAAC,GACpBA,EAAEC,iBACmB,KAAjBR,EAAMS,OACRC,IAAMC,KAAK,8CAA+C,CACxDC,MAAO,UACPC,SAAU,gBACVC,UAAW,IACXC,WAAYC,IACZC,QAAS,IAGXnB,EAAcE,GAEhBC,EAAS,KAOP,UACE,wBAAQiB,KAAK,SAAShB,UAAWC,IAAEgB,OAAnC,SACE,cAAC,IAAD,CAAYC,MAAO,CAACC,SAAU,GAAIC,MAAO,eAE3C,uBACEC,SAVa,SAAAhB,GACnBN,EAASM,EAAEiB,OAAOC,MAAMC,gBAUlBD,MAAOzB,EACPE,UAAWC,IAAEwB,MACbT,KAAK,OACLU,aAAa,MACbC,WAAS,EACTC,YAAY,kC,uDCpCP,SAASC,IACtB,OACE,mCACE,qBAAK7B,UAAWC,IAAE6B,QAAlB,SACE,cAAC,IAAD,CACEd,KAAK,OACLI,MAAM,UACNW,OAAQ,IACRC,MAAO,IACPC,QAAS,UCNJ,SAASC,EAAT,GAAkD,IAA3BpC,EAA0B,EAA1BA,MAAOqC,EAAmB,EAAnBA,OAAQC,EAAW,EAAXA,SAanD,OAZAC,qBAAU,WACO,aAAXF,GACF3B,IAAM8B,MAAN,oCAAyCxC,GAAS,CAChDY,MAAO,UACPC,SAAU,gBACVC,UAAW,IACXC,WAAYC,IACZC,QAAS,OAMb,qBAAIf,UAAWC,IAAEsC,QAAjB,UACc,SAAXJ,GACC,oBAAInC,UAAWC,IAAEuC,QAAjB,0CAEU,YAAXL,GACC,qCACE,oBAAInC,UAAWC,IAAEuC,QAAjB,qCADF,IACyD,cAACX,EAAD,OAG1DO,K,qBCzBQ,SAASK,EAAT,GAIX,IAHFC,EAGC,EAHDA,OACAC,EAEC,EAFDA,iBACAC,EACC,EADDA,mBAEMC,EAAc,SAAAxC,GAClBsC,IACAC,EAAmBvC,IAGrB,OACE,mCACGqC,EAAOI,KAAI,WAA0CC,GAA1C,IAAEC,EAAF,EAAEA,GAAIC,EAAN,EAAMA,aAAcC,EAApB,EAAoBA,cAAeC,EAAnC,EAAmCA,KAAnC,OACV,oBAAYH,GAAIA,EAAIhD,UAAWC,IAAEmD,KAAMC,QAASR,EAAhD,SACE,qBACES,IAAKL,EACL,WAAUC,EACVK,IAAKJ,EACLnD,UAAWC,IAAEuD,SALRT,Q,qBCfF,SAASU,EAAT,GAAiD,IAAhCtB,EAA+B,EAA/BA,OAAQuB,EAAuB,EAAvBA,qBACtC,OACE,mCACc,aAAXvB,GACC,qBAAKnC,UAAWC,IAAE0D,UAAlB,SACE,wBAAQN,QAASK,EAAsB1D,UAAWC,IAAEgB,OAApD,2B,oCCJW2C,E,4MACnBC,MAAQ,CAACvB,MAAO,KAAMwB,UAAW,M,uDAEjC,SAAkBxB,EAAOwB,GACvBC,KAAKC,SAAS,CACZ1B,MAAOA,EACPwB,UAAWA,M,oBAIf,WACE,OAAIC,KAAKF,MAAMC,UAEX,gCACE,+gBAIA,0BAAS5C,MAAO,CAAC+C,WAAY,YAA7B,UACGF,KAAKF,MAAMvB,OAASyB,KAAKF,MAAMvB,MAAM4B,WACtC,uBACCH,KAAKF,MAAMC,UAAUK,qBAKvBJ,KAAKK,MAAMhC,a,GA1BYiC,a,iBCAnB,SAASC,EAAT,GAA2D,IAA3CC,EAA0C,EAA1CA,kBAAmBC,EAAuB,EAAvBA,WAAYC,EAAW,EAAXA,SAC5DpC,qBAAU,WACR,IAAMqC,EAAsB,SAAArE,GACZ,WAAVA,EAAEsE,KACJJ,KAIJ,OADAK,OAAOC,iBAAiB,UAAWH,GAC5B,WACLE,OAAOE,oBAAoB,UAAWJ,MAEvC,CAACH,IAQJ,OACE,mCACGC,GACC,qBAAKxE,UAAWC,IAAE8E,QAAS1B,QATC,SAAAhD,GAC5BA,EAAE2E,gBAAkB3E,EAAEiB,QACxBiD,KAOE,SACE,qBAAKvE,UAAWC,IAAEgF,MAAlB,SACE,qBAAK3B,IAAKmB,EAAUlB,IAAI,qBC1BpC,IAAM2B,EAAgB,uCAAG,WAAOpF,EAAOqF,GAAd,mBAAAC,EAAA,sEACLC,MAAM,8BAAD,OACSvF,EADT,iBACuBqF,EADvB,gGADA,cACjBG,EADiB,gBAIFA,EAAIC,OAJF,uBAIhBC,EAJgB,EAIhBA,KAJgB,kBAKhBA,GALgB,2CAAH,wDAOPN,ICKA,SAASO,IACtB,MAA0B5F,mBAAS,IAAnC,mBAAOC,EAAP,KAAcC,EAAd,KACA,EAA4BF,mBAAS,IAArC,mBAAO6C,EAAP,KAAegD,EAAf,KACA,EAAwB7F,mBAAS,GAAjC,mBAAOsF,EAAP,KAAaQ,EAAb,KACA,EAA4B9F,mBAAS,QAArC,mBAAOsC,EAAP,KAAeyD,EAAf,KACA,EAAoC/F,oBAAS,GAA7C,mBAAO2E,EAAP,KAAmBqB,EAAnB,KACA,EAAgChG,mBAAS,IAAzC,mBAAO4E,EAAP,KAAiBqB,EAAjB,KAUAzD,qBAAU,WACR,sBAAC,4BAAA+C,EAAA,kEAEiB,KAAVtF,EAFP,gCAGiCoF,EAAiBpF,EAAOqF,GAHzD,OAGWY,EAHX,OAIKL,GAAU,SAAAzF,GAAC,4BAAQA,GAAR,YAAc8F,OACrBA,EAAcC,QAAU,GAC1BJ,EAAU,aAEVA,EAAU,YACVK,YAAW,kBAAML,EAAU,UAAS,MAEzB,IAATT,EACFP,OAAOsB,SAAS,CACdC,IAAK,EACLC,SAAU,WAGZxB,OAAOsB,SAAS,CACdC,IAAKE,SAASC,gBAAgBC,aAC9BH,SAAU,WAnBnB,yDAwBGR,EAAU,YACVK,YAAW,kBAAML,EAAU,UAAS,KAzBvC,yDAAD,KA4BC,CAACT,EAAMrF,IAwBV,OACE,qCACE,cAACH,EAAD,CAAWC,cAxBY,SAAA4G,GACrB1G,IAAU0G,IACZzG,EAASyG,GACTb,EAAQ,GACRC,EAAU,WACVF,EAAU,QAoBV,cAAC,EAAD,UACE,cAACxD,EAAD,CAAcC,OAAQA,EAAQrC,MAAOA,EAArC,SACE,cAAC2C,EAAD,CACEC,OAAQA,EACRC,iBAjBU,WAClBkD,GAAc,IAiBNjD,mBAZiB,SAAAvC,GACzByF,EAAYzF,EAAEiB,OAAOmF,QAAQnD,YAe3B,cAACG,EAAD,CACEtB,OAAQA,EACRuB,qBA5BuB,WAC3BiC,GAAQ,SAAA1F,GAAC,OAAIA,EAAI,KACjB2F,EAAU,cA4BR,cAACtB,EAAD,CACEC,kBAxBe,WACnBsB,GAAc,IAwBVrB,WAAYA,EACZC,SAAUA,IAEZ,cAAC,IAAD,CAAgBvD,MAAO,CAACc,MAAO,gBCjGrC0E,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFP,SAASQ,eAAe,W","file":"static/js/main.7f9c34a7.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__8iuoS\",\"searchForm\":\"Searchbar_searchForm__eKloI\",\"button\":\"Searchbar_button__3TJh9\",\"input\":\"Searchbar_input__1zK0y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery\":\"ImageGallery_gallery__63Srn\",\"message\":\"ImageGallery_message__3T5AB\",\"blink\":\"ImageGallery_blink__185SQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"ImageGalleryItem_item__2kNc_\",\"image\":\"ImageGalleryItem_image__3n6Zd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Button_container__2rBUW\",\"button\":\"Button_button__37BKk\",\"puls\":\"Button_puls__30VTX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__JpiX8\",\"modal\":\"Modal_modal__2DYsJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinner\":\"Loader_spinner__3pX18\"};","import {useState} from 'react';\r\nimport s from './Searchbar.module.scss';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport {toast, Flip} from 'react-toastify';\r\n\r\nexport default function Searchbar({onQueryUpdate}) {\r\n  const [query, setQuery] = useState('');\r\n  const submitHandler = e => {\r\n    e.preventDefault();\r\n    if (query.trim() === '') {\r\n      toast.info('Please enter at least a couple of letters:)', {\r\n        theme: 'colored',\r\n        position: 'bottom-center',\r\n        autoClose: 5000,\r\n        transition: Flip,\r\n        toastId: 1,\r\n      });\r\n    } else {\r\n      onQueryUpdate(query);\r\n    }\r\n    setQuery('');\r\n  };\r\n  const inputHandler = e => {\r\n    setQuery(e.target.value.toLowerCase());\r\n  };\r\n  return (\r\n    <header className={s.searchbar}>\r\n      <form className={s.searchForm} onSubmit={submitHandler}>\r\n        <button type=\"submit\" className={s.button}>\r\n          <SearchIcon style={{fontSize: 36, color: '#3f51b5'}}></SearchIcon>\r\n        </button>\r\n        <input\r\n          onChange={inputHandler}\r\n          value={query}\r\n          className={s.input}\r\n          type=\"text\"\r\n          autoComplete=\"off\"\r\n          autoFocus\r\n          placeholder=\"Search images and photos\"\r\n        />\r\n      </form>\r\n    </header>\r\n  );\r\n}\r\n","import Loader from 'react-loader-spinner';\r\nimport s from './Loader.module.scss';\r\nexport default function Spinner() {\r\n  return (\r\n    <>\r\n      <div className={s.spinner}>\r\n        <Loader\r\n          type=\"Grid\"\r\n          color=\"#3f51b5\"\r\n          height={100}\r\n          width={100}\r\n          timeout={2000}\r\n        />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","import {useEffect} from 'react';\r\nimport s from './ImageGallery.module.scss';\r\nimport {toast, Flip} from 'react-toastify';\r\nimport Spinner from '../Loader/Loader';\r\n\r\nexport default function ImageGallery({query, status, children}) {\r\n  useEffect(() => {\r\n    if (status === 'rejected') {\r\n      toast.error(`No (more) image found for ${query}`, {\r\n        theme: 'colored',\r\n        position: 'bottom-center',\r\n        autoClose: 5000,\r\n        transition: Flip,\r\n        toastId: 2,\r\n      });\r\n    }\r\n  });\r\n\r\n  return (\r\n    <ul className={s.gallery}>\r\n      {status === 'idle' && (\r\n        <li className={s.message}>PLease, start image search! </li>\r\n      )}\r\n      {status === 'pending' && (\r\n        <>\r\n          <li className={s.message}>loading..., please wait</li> <Spinner />\r\n        </>\r\n      )}\r\n      {children}\r\n    </ul>\r\n  );\r\n}\r\n","import s from './ImageGalleryItem.module.scss';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport default function ImageGalleryItem({\r\n  images,\r\n  onClickOpenModal,\r\n  handlerBigImageUrl,\r\n}) {\r\n  const onOpenModal = e => {\r\n    onClickOpenModal();\r\n    handlerBigImageUrl(e);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {images.map(({id, webformatURL, largeImageURL, tags}, i) => (\r\n        <li key={i} id={id} className={s.item} onClick={onOpenModal}>\r\n          <img\r\n            src={webformatURL}\r\n            data-src={largeImageURL}\r\n            alt={tags}\r\n            className={s.image}\r\n          />\r\n        </li>\r\n      ))}\r\n    </>\r\n  );\r\n}\r\n\r\nImageGalleryItem.propTypes = {\r\n  images: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      id: PropTypes.number,\r\n      webformatURL: PropTypes.string,\r\n      largeImageURL: PropTypes.string,\r\n      tags: PropTypes.string,\r\n    }),\r\n  ),\r\n};\r\n","import s from './Button.module.scss';\r\nexport default function Button({status, handlerPageIncrement}) {\r\n  return (\r\n    <>\r\n      {status === 'resolved' && (\r\n        <div className={s.container}>\r\n          <button onClick={handlerPageIncrement} className={s.button}>\r\n            Load more\r\n          </button>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import React, {Component} from 'react';\r\n\r\nexport default class Fuse extends Component {\r\n  state = {error: null, errorInfo: null};\r\n\r\n  componentDidCatch(error, errorInfo) {\r\n    this.setState({\r\n      error: error,\r\n      errorInfo: errorInfo,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    if (this.state.errorInfo) {\r\n      return (\r\n        <div>\r\n          <h2>\r\n            Упс..! Скорее всего сервер вернул кривой JSON или массив и я не могу\r\n            его отрендерить. Повторите запрос.\r\n          </h2>\r\n          <details style={{whiteSpace: 'pre-wrap'}}>\r\n            {this.state.error && this.state.error.toString()}\r\n            <br />\r\n            {this.state.errorInfo.componentStack}\r\n          </details>\r\n        </div>\r\n      );\r\n    }\r\n    return this.props.children;\r\n  }\r\n}\r\n","import {useEffect} from 'react';\r\nimport s from './Modal.module.scss';\r\nexport default function Modal({onClickCloseModal, modalState, hdImgURL}) {\r\n  useEffect(() => {\r\n    const handlerKeyDownClose = e => {\r\n      if (e.key === 'Escape') {\r\n        onClickCloseModal();\r\n      }\r\n    };\r\n    window.addEventListener('keydown', handlerKeyDownClose);\r\n    return () => {\r\n      window.removeEventListener('keydown', handlerKeyDownClose);\r\n    };\r\n  }, [onClickCloseModal]);\r\n\r\n  const handlerClickBackdropClose = e => {\r\n    if (e.currentTarget === e.target) {\r\n      onClickCloseModal();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {modalState && (\r\n        <div className={s.overlay} onClick={handlerClickBackdropClose}>\r\n          <div className={s.modal}>\r\n            <img src={hdImgURL} alt=\"target big\" />\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","const fetchImagesQuery = async (query, page) => {\r\n  const res = await fetch(\r\n    `https://pixabay.com/api/?q=${query}&page=${page}&key=22469434-62330606312f34e078b383df4&image_type=photo&orientation=horizontal&per_page=12`,\r\n  );\r\n  const {hits} = await res.json();\r\n  return hits;\r\n};\r\nexport default fetchImagesQuery;\r\n","import {useState, useEffect} from 'react';\nimport './App.scss';\nimport {ToastContainer} from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport Searchbar from './components/Searchbar/Searchbar';\nimport ImageGallery from './components/ImageGallery/ImageGallery';\nimport ImageGalleryItem from './components/ImageGalleryItem/ImageGalleryItem';\nimport Button from './components/Button/Button';\nimport Fuse from './components/Fuse/Fuse';\nimport Modal from './components/Modal/Modal';\nimport fetchImagesQuery from '../src/Api/Api';\n\nexport default function App() {\n  const [query, setQuery] = useState('');\n  const [images, setImages] = useState([]);\n  const [page, setPage] = useState(1);\n  const [status, setStatus] = useState('idle');\n  const [modalState, setModalState] = useState(false);\n  const [hdImgURL, setHdImgURL] = useState('');\n\n  // const useIsMount = () => {\n  //   const isMountRef = useRef(true);\n  //   useEffect(() => {\n  //     isMountRef.current = false;\n  //   }, []);\n  //   return isMountRef.current;\n  // };\n\n  useEffect(() => {\n    (async () => {\n      try {\n        if (query !== '' || null) {\n          const fetchedImages = await fetchImagesQuery(query, page);\n          setImages(s => [...s, ...fetchedImages]);\n          if (fetchedImages.length >= 12) {\n            setStatus('resolved');\n          } else {\n            setStatus('rejected');\n            setTimeout(() => setStatus('idle'), 5000);\n          }\n          if (page === 1) {\n            window.scrollTo({\n              top: 0,\n              behavior: 'smooth',\n            });\n          } else {\n            window.scrollTo({\n              top: document.documentElement.scrollHeight,\n              behavior: 'smooth',\n            });\n          }\n        }\n      } catch {\n        setStatus('rejected');\n        setTimeout(() => setStatus('idle'), 5000);\n      }\n    })();\n  }, [page, query]);\n\n  const handlerQueryUpdate = newQuery => {\n    if (query !== newQuery) {\n      setQuery(newQuery);\n      setPage(1);\n      setStatus('pending');\n      setImages([]);\n    }\n  };\n  const handlerPageIncrement = () => {\n    setPage(s => s + 1);\n    setStatus('pending');\n  };\n  const isOpenModal = () => {\n    setModalState(true);\n  };\n  const isCloseModal = () => {\n    setModalState(false);\n  };\n  const handlerBigImageUrl = e => {\n    setHdImgURL(e.target.dataset.src);\n  };\n\n  return (\n    <>\n      <Searchbar onQueryUpdate={handlerQueryUpdate}></Searchbar>\n      <Fuse>\n        <ImageGallery status={status} query={query}>\n          <ImageGalleryItem\n            images={images}\n            onClickOpenModal={isOpenModal}\n            handlerBigImageUrl={handlerBigImageUrl}\n          ></ImageGalleryItem>\n        </ImageGallery>\n      </Fuse>\n      <Button\n        status={status}\n        handlerPageIncrement={handlerPageIncrement}\n      ></Button>\n      <Modal\n        onClickCloseModal={isCloseModal}\n        modalState={modalState}\n        hdImgURL={hdImgURL}\n      ></Modal>\n      <ToastContainer style={{width: 'inherit'}}></ToastContainer>\n    </>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App.jsx';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}